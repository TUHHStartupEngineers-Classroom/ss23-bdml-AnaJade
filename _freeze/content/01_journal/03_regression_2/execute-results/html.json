{
  "hash": "810851d47ae034fc7b51f0261dbcd81d",
  "result": {
    "markdown": "---\ntitle: \"Supervised ML - Regression\"\nauthor: \"Ana Jade\"\n---\n\n\n# Load libraries\n\n::: {.cell hash='03_regression_2_cache/html/unnamed-chunk-1_6e3be4cd264be4da75b0813397ffafb2'}\n\n```{.r .cell-code}\nlibrary(tidymodels)  # for the parsnip package, along with the rest of tidymodels\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> ── Attaching packages ────────────────────────────────────── tidymodels 1.1.0 ──\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n#> ✔ broom        1.0.4     ✔ rsample      1.1.1\n#> ✔ dials        1.2.0     ✔ tune         1.1.1\n#> ✔ infer        1.0.4     ✔ workflows    1.1.3\n#> ✔ modeldata    1.1.0     ✔ workflowsets 1.0.1\n#> ✔ parsnip      1.1.0     ✔ yardstick    1.2.0\n#> ✔ recipes      1.0.6\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n#> ── Conflicts ───────────────────────────────────────── tidymodels_conflicts() ──\n#> ✖ data.table::between()   masks dplyr::between()\n#> ✖ scales::discard()       masks purrr::discard()\n#> ✖ dplyr::filter()         masks stats::filter()\n#> ✖ data.table::first()     masks dplyr::first()\n#> ✖ recipes::fixed()        masks stringr::fixed()\n#> ✖ dplyr::lag()            masks stats::lag()\n#> ✖ data.table::last()      masks dplyr::last()\n#> ✖ yardstick::spec()       masks vroom::spec(), readr::spec()\n#> ✖ recipes::step()         masks stats::step()\n#> ✖ data.table::transpose() masks purrr::transpose()\n#> • Search for functions across packages at https://www.tidymodels.org/find/\n```\n:::\n\n```{.r .cell-code}\n# Standard\nlibrary(tidyverse)\n# Preprocessing & Sampling\nlibrary(recipes)\nlibrary(rsample)\n# Modeling Error Metrics\nlibrary(yardstick)\n```\n:::\n\n\n# Load data\nFirst, the data needs to be loaded from the .rds file. THen it is modified to keep only relevant columns.\n\n\n::: {.cell hash='03_regression_2_cache/html/unnamed-chunk-2_93cdcf72e94f555f0b36c18992daa8ed'}\n\n```{.r .cell-code}\n# Load data from files\nbike_features_tbl <- readRDS(\"data/bike_features_tbl.rds\")\n\nglimpse(bike_features_tbl)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#> Rows: 231\n#> Columns: 67\n#> $ bike_id                     <dbl> 2875, 2873, 2874, 2876, 2877, 2225, 2091, …\n#> $ model                       <chr> \"Aeroad CF SL Disc 8.0 Di2\", \"Aeroad CF SL…\n#> $ model_year                  <dbl> 2020, 2020, 2020, 2020, 2020, 2019, 2019, …\n#> $ frame_material              <chr> \"carbon\", \"carbon\", \"carbon\", \"carbon\", \"c…\n#> $ weight                      <dbl> 7.60, 7.27, 7.10, 7.73, 7.83, 6.80, 6.80, …\n#> $ price                       <dbl> 4579, 6919, 6429, 5069, 3609, 6139, 5359, …\n#> $ category_1                  <chr> \"Road\", \"Road\", \"Road\", \"Road\", \"Road\", \"R…\n#> $ category_2                  <chr> \"Race\", \"Race\", \"Race\", \"Race\", \"Race\", \"R…\n#> $ category_3                  <chr> \"Aeroad\", \"Aeroad\", \"Aeroad\", \"Aeroad\", \"A…\n#> $ gender                      <chr> \"unisex\", \"unisex\", \"unisex\", \"unisex\", \"u…\n#> $ url                         <chr> \"https://www.canyon.com/en-de/road-bikes/r…\n#> $ Frame                       <chr> \"Canyon Aeroad CF SL Disc\", \"Canyon Aeroad…\n#> $ Fork                        <chr> \"Canyon FK0041 CF SLX Disc\", \"Canyon FK004…\n#> $ `Rear Derailleur`           <chr> \"Shimano Ultegra Di2 R8050 SS\", \"SRAM RED …\n#> $ `Front Derailleur`          <chr> \"Shimano Ultegra Di2 R8050\", \"SRAM RED eTa…\n#> $ Cassette                    <chr> \"Shimano Ultegra R8000, 11-speed, 11-28T\",…\n#> $ Crank                       <chr> \"Shimano Ultegra R8000\", \"SRAM RED D1\", \"S…\n#> $ `Bottom bracket`            <chr> \"Shimano Pressfit BB72\", \"SRAM Pressfit RE…\n#> $ `Thru Axle`                 <chr> \"Canyon Thru Axle\", \"Canyon Thru Axle\", \"C…\n#> $ Cockpit                     <chr> \"Canyon H36 Aerocockpit CF\", \"Canyon H36 A…\n#> $ Saddle                      <chr> \"Selle Italia SLR\", \"Selle Italia SLR\", \"S…\n#> $ Seatpost                    <chr> \"Canyon S27 Aero VCLS CF\", \"Canyon S27 Aer…\n#> $ Pedals                      <chr> \"None included\", \"None included\", \"None in…\n#> $ `Derailleur hanger`         <chr> \"Shop Derailleur Hanger GP0211-01\", \"Shop …\n#> $ Battery                     <chr> \"\", \"SRAM eTap Powerpack\", \"\", \"SRAM eTap …\n#> $ Brake                       <chr> \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"…\n#> $ `Shift Lever`               <chr> \"\", \"\", \"\", \"\", \"\", \"\", \"Shimano Di2 Remot…\n#> $ Chain                       <chr> \"\", \"\", \"\", \"\", \"\", \"\", \"Shimano CN-HG901 …\n#> $ Stem                        <chr> \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"Canyon V13\", …\n#> $ Handlebar                   <chr> \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"Canyon H16 Ae…\n#> $ Headset                     <chr> \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"…\n#> $ Motor                       <chr> \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"…\n#> $ `Battery Charger`           <chr> \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"…\n#> $ `Flat Pedals`               <chr> \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"…\n#> $ Chainguard                  <chr> \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"…\n#> $ `Aero Bar`                  <chr> \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"…\n#> $ `Brake Lever / Master`      <chr> \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"…\n#> $ `Wheel Tire System`         <chr> \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"…\n#> $ `Suspension Fork`           <chr> \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"…\n#> $ `Disc Brake`                <chr> \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"…\n#> $ Grips                       <chr> \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"…\n#> $ Chainring                   <chr> \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"…\n#> $ Display                     <chr> \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"…\n#> $ Modeswitch                  <chr> \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"…\n#> $ `Rear Shock`                <chr> \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"…\n#> $ Light                       <chr> \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"…\n#> $ Fender                      <chr> \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"…\n#> $ `Bike Racks`                <chr> \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"…\n#> $ `Brake 1`                   <chr> \"\", \"\", \"\", \"\", \"\", \"SRAM S-900 Direct Mou…\n#> $ `Brake 2`                   <chr> \"\", \"\", \"\", \"\", \"\", \"SRAM S-900 Direct Mou…\n#> $ `Shift-/ Brake Lever 1`     <chr> \"Shimano Ultegra Di2 R8070, 11-speed\", \"SR…\n#> $ `Shift-/ Brake Lever 2`     <chr> \"Shimano Ultegra Di2 R8070, 11-speed\", \"SR…\n#> $ `Wheel 1`                   <chr> \"DT Swiss ARC 1400 Dicut\", \"DT Swiss ARC 1…\n#> $ `Wheel 2`                   <chr> \"DT Swiss ARC 1400 Dicut\", \"DT Swiss ARC 1…\n#> $ `Tyre 1`                    <chr> \"Continental Grand Prix 5000 / Attack  23 …\n#> $ `Tyre 2`                    <chr> \"Continental Grand Prix 5000, 25 mm\", \"Con…\n#> $ `Handlebar Tape 1`          <chr> \"Canyon Ergospeed Gel\", \"Canyon Ergospeed …\n#> $ `Handlebar Tape 2`          <chr> \"Canyon bar-end plug\", \"Canyon bar-end plu…\n#> $ `Manuals and Accessories 1` <chr> \"Canyon tool case\", \"Canyon tool case\", \"C…\n#> $ `Manuals and Accessories 2` <chr> \"DT Swiss warranty & intended use manual\",…\n#> $ `Manuals and Accessories 3` <chr> \"Canyon starter box\", \"Canyon starter box\"…\n#> $ `Manuals and Accessories 4` <chr> \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"BAG R…\n#> $ `Manuals and Accessories 5` <chr> \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"…\n#> $ `Manuals and Accessories 6` <chr> \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"…\n#> $ `Manuals and Accessories 7` <chr> \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"…\n#> $ `Manuals and Accessories 8` <chr> \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"…\n#> $ `Brake Rotor`               <list> \"Shimano RT800\", \"SRAM Centerline X\", \"Sh…\n```\n:::\n\n```{.r .cell-code}\nbike_features_tbl <- bike_features_tbl %>% \n  select(model:url)%>% \n  mutate(id = row_number()) %>% \n  select(id, everything(), -url)\n```\n:::\n\n\nThe train and test sets are then created\n\n::: {.cell hash='03_regression_2_cache/html/unnamed-chunk-3_678d01af4bdc5cc4d8d84c04e7bf6820'}\n\n```{.r .cell-code}\n# Create train/test split\nset.seed(321)\n# Put 3/4 of the data into the training set \ndata_split <- initial_split(bike_features_tbl, prop = 3/4)\n\n# Create data frames for the two sets:\ntrain_data <- training(data_split)\ntest_data  <- testing(data_split)\n```\n:::\n\n\n# I. Build a model\nHere, the model template is created.\n\n::: {.cell hash='03_regression_2_cache/html/unnamed-chunk-4_b754c0b15e3fdc89f97d93b99002408d'}\n\n```{.r .cell-code}\nlinear_lm_simple <- linear_reg(mode = \"regression\") %>%\n  set_engine(\"lm\")\n```\n:::\n\n\n# II. Create features with the recipes package\nThe recipe is used to apply all pre-processing operations. \n\n::: {.cell hash='03_regression_2_cache/html/unnamed-chunk-5_7c60f09cc9263d77011b11e2f53d97ea'}\n\n```{.r .cell-code}\nbikes_rec <- recipe(price ~ ., data = train_data) %>%\n  update_role(id, model, new_role = \"ID\")%>%\n  step_rm(model) %>%\n  step_dummy(all_nominal(), one_hot = TRUE) %>%\n  prep()\n\nsummary(bikes_rec)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"variable\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"type\"],\"name\":[2],\"type\":[\"list\"],\"align\":[\"right\"]},{\"label\":[\"role\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"source\"],\"name\":[4],\"type\":[\"chr\"],\"align\":[\"left\"]}],\"data\":[{\"1\":\"id\",\"2\":\"<chr [2]>\",\"3\":\"ID\",\"4\":\"original\"},{\"1\":\"model_year\",\"2\":\"<chr [2]>\",\"3\":\"predictor\",\"4\":\"original\"},{\"1\":\"weight\",\"2\":\"<chr [2]>\",\"3\":\"predictor\",\"4\":\"original\"},{\"1\":\"price\",\"2\":\"<chr [2]>\",\"3\":\"outcome\",\"4\":\"original\"},{\"1\":\"frame_material_aluminium\",\"2\":\"<chr [2]>\",\"3\":\"predictor\",\"4\":\"derived\"},{\"1\":\"frame_material_carbon\",\"2\":\"<chr [2]>\",\"3\":\"predictor\",\"4\":\"derived\"},{\"1\":\"category_1_E.Bikes\",\"2\":\"<chr [2]>\",\"3\":\"predictor\",\"4\":\"derived\"},{\"1\":\"category_1_Gravel\",\"2\":\"<chr [2]>\",\"3\":\"predictor\",\"4\":\"derived\"},{\"1\":\"category_1_Hybrid...City\",\"2\":\"<chr [2]>\",\"3\":\"predictor\",\"4\":\"derived\"},{\"1\":\"category_1_Mountain\",\"2\":\"<chr [2]>\",\"3\":\"predictor\",\"4\":\"derived\"},{\"1\":\"category_1_Road\",\"2\":\"<chr [2]>\",\"3\":\"predictor\",\"4\":\"derived\"},{\"1\":\"category_2_Adventure\",\"2\":\"<chr [2]>\",\"3\":\"predictor\",\"4\":\"derived\"},{\"1\":\"category_2_All.Road\",\"2\":\"<chr [2]>\",\"3\":\"predictor\",\"4\":\"derived\"},{\"1\":\"category_2_City\",\"2\":\"<chr [2]>\",\"3\":\"predictor\",\"4\":\"derived\"},{\"1\":\"category_2_Cross.Country\",\"2\":\"<chr [2]>\",\"3\":\"predictor\",\"4\":\"derived\"},{\"1\":\"category_2_Cyclocross\",\"2\":\"<chr [2]>\",\"3\":\"predictor\",\"4\":\"derived\"},{\"1\":\"category_2_Dirt.Jump\",\"2\":\"<chr [2]>\",\"3\":\"predictor\",\"4\":\"derived\"},{\"1\":\"category_2_Downhill\",\"2\":\"<chr [2]>\",\"3\":\"predictor\",\"4\":\"derived\"},{\"1\":\"category_2_E.City\",\"2\":\"<chr [2]>\",\"3\":\"predictor\",\"4\":\"derived\"},{\"1\":\"category_2_E.Fitness\",\"2\":\"<chr [2]>\",\"3\":\"predictor\",\"4\":\"derived\"},{\"1\":\"category_2_E.Gravel\",\"2\":\"<chr [2]>\",\"3\":\"predictor\",\"4\":\"derived\"},{\"1\":\"category_2_E.Mountain\",\"2\":\"<chr [2]>\",\"3\":\"predictor\",\"4\":\"derived\"},{\"1\":\"category_2_E.Road\",\"2\":\"<chr [2]>\",\"3\":\"predictor\",\"4\":\"derived\"},{\"1\":\"category_2_E.Trekking\",\"2\":\"<chr [2]>\",\"3\":\"predictor\",\"4\":\"derived\"},{\"1\":\"category_2_Endurance\",\"2\":\"<chr [2]>\",\"3\":\"predictor\",\"4\":\"derived\"},{\"1\":\"category_2_Enduro\",\"2\":\"<chr [2]>\",\"3\":\"predictor\",\"4\":\"derived\"},{\"1\":\"category_2_Fat.Bikes\",\"2\":\"<chr [2]>\",\"3\":\"predictor\",\"4\":\"derived\"},{\"1\":\"category_2_Race\",\"2\":\"<chr [2]>\",\"3\":\"predictor\",\"4\":\"derived\"},{\"1\":\"category_2_Touring\",\"2\":\"<chr [2]>\",\"3\":\"predictor\",\"4\":\"derived\"},{\"1\":\"category_2_Trail\",\"2\":\"<chr [2]>\",\"3\":\"predictor\",\"4\":\"derived\"},{\"1\":\"category_2_Triathlon.Bike\",\"2\":\"<chr [2]>\",\"3\":\"predictor\",\"4\":\"derived\"},{\"1\":\"category_3_Aeroad\",\"2\":\"<chr [2]>\",\"3\":\"predictor\",\"4\":\"derived\"},{\"1\":\"category_3_Commuter\",\"2\":\"<chr [2]>\",\"3\":\"predictor\",\"4\":\"derived\"},{\"1\":\"category_3_Commuter.ON\",\"2\":\"<chr [2]>\",\"3\":\"predictor\",\"4\":\"derived\"},{\"1\":\"category_3_Dude\",\"2\":\"<chr [2]>\",\"3\":\"predictor\",\"4\":\"derived\"},{\"1\":\"category_3_Endurace\",\"2\":\"<chr [2]>\",\"3\":\"predictor\",\"4\":\"derived\"},{\"1\":\"category_3_Endurace.ON\",\"2\":\"<chr [2]>\",\"3\":\"predictor\",\"4\":\"derived\"},{\"1\":\"category_3_Exceed\",\"2\":\"<chr [2]>\",\"3\":\"predictor\",\"4\":\"derived\"},{\"1\":\"category_3_Grail\",\"2\":\"<chr [2]>\",\"3\":\"predictor\",\"4\":\"derived\"},{\"1\":\"category_3_Grail.ON\",\"2\":\"<chr [2]>\",\"3\":\"predictor\",\"4\":\"derived\"},{\"1\":\"category_3_Grand.Canyon\",\"2\":\"<chr [2]>\",\"3\":\"predictor\",\"4\":\"derived\"},{\"1\":\"category_3_Grand.Canyon.ON\",\"2\":\"<chr [2]>\",\"3\":\"predictor\",\"4\":\"derived\"},{\"1\":\"category_3_Inflite\",\"2\":\"<chr [2]>\",\"3\":\"predictor\",\"4\":\"derived\"},{\"1\":\"category_3_Lux\",\"2\":\"<chr [2]>\",\"3\":\"predictor\",\"4\":\"derived\"},{\"1\":\"category_3_Neuron\",\"2\":\"<chr [2]>\",\"3\":\"predictor\",\"4\":\"derived\"},{\"1\":\"category_3_Neuron.ON\",\"2\":\"<chr [2]>\",\"3\":\"predictor\",\"4\":\"derived\"},{\"1\":\"category_3_Pathlite\",\"2\":\"<chr [2]>\",\"3\":\"predictor\",\"4\":\"derived\"},{\"1\":\"category_3_Pathlite.ON\",\"2\":\"<chr [2]>\",\"3\":\"predictor\",\"4\":\"derived\"},{\"1\":\"category_3_Precede.ON\",\"2\":\"<chr [2]>\",\"3\":\"predictor\",\"4\":\"derived\"},{\"1\":\"category_3_Roadlite\",\"2\":\"<chr [2]>\",\"3\":\"predictor\",\"4\":\"derived\"},{\"1\":\"category_3_Roadlite.ON\",\"2\":\"<chr [2]>\",\"3\":\"predictor\",\"4\":\"derived\"},{\"1\":\"category_3_Sender\",\"2\":\"<chr [2]>\",\"3\":\"predictor\",\"4\":\"derived\"},{\"1\":\"category_3_Spectral\",\"2\":\"<chr [2]>\",\"3\":\"predictor\",\"4\":\"derived\"},{\"1\":\"category_3_Spectral.ON\",\"2\":\"<chr [2]>\",\"3\":\"predictor\",\"4\":\"derived\"},{\"1\":\"category_3_Speedmax\",\"2\":\"<chr [2]>\",\"3\":\"predictor\",\"4\":\"derived\"},{\"1\":\"category_3_Stitched\",\"2\":\"<chr [2]>\",\"3\":\"predictor\",\"4\":\"derived\"},{\"1\":\"category_3_Strive\",\"2\":\"<chr [2]>\",\"3\":\"predictor\",\"4\":\"derived\"},{\"1\":\"category_3_Torque\",\"2\":\"<chr [2]>\",\"3\":\"predictor\",\"4\":\"derived\"},{\"1\":\"category_3_Ultimate\",\"2\":\"<chr [2]>\",\"3\":\"predictor\",\"4\":\"derived\"},{\"1\":\"gender_female\",\"2\":\"<chr [2]>\",\"3\":\"predictor\",\"4\":\"derived\"},{\"1\":\"gender_unisex\",\"2\":\"<chr [2]>\",\"3\":\"predictor\",\"4\":\"derived\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n\n```{.r .cell-code}\ntrain_transformed_tbl <- bake(bikes_rec, train_data)\ntest_transformed_tbl  <- bake(bikes_rec, test_data)    \n```\n:::\n\n\n# III. Bundle the model and recipe with the workflow package\nNow it is time to create the workflow, and then train the model.\n\n::: {.cell hash='03_regression_2_cache/html/unnamed-chunk-6_3d692eed47c213b6e1c3f63c3a610232'}\n\n```{.r .cell-code}\n# Create the workflow\nbikes_wflow <- \n  workflow() %>% \n  add_model(linear_lm_simple) %>% \n  add_recipe(bikes_rec)\nbikes_wflow\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#> ══ Workflow ════════════════════════════════════════════════════════════════════\n#> Preprocessor: Recipe\n#> Model: linear_reg()\n#> \n#> ── Preprocessor ────────────────────────────────────────────────────────────────\n#> 2 Recipe Steps\n#> \n#> • step_rm()\n#> • step_dummy()\n#> \n#> ── Model ───────────────────────────────────────────────────────────────────────\n#> Linear Regression Model Specification (regression)\n#> \n#> Computational engine: lm\n```\n:::\n\n```{.r .cell-code}\n# Train the model\nbikes_fit <- \n  bikes_wflow %>% \n  fit(data = train_data)\n\n# Show the model\nbikes_fit %>% \n  extract_fit_parsnip() %>% \n  tidy()\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"term\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"estimate\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"std.error\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"statistic\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"p.value\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"(Intercept)\",\"2\":\"-1.462405e+06\",\"3\":\"545091.2855\",\"4\":\"-2.682862838\",\"5\":\"8.185210e-03\"},{\"1\":\"model_year\",\"2\":\"7.285495e+02\",\"3\":\"269.8910\",\"4\":\"2.699421535\",\"5\":\"7.808376e-03\"},{\"1\":\"weight\",\"2\":\"-5.854776e+02\",\"3\":\"134.6810\",\"4\":\"-4.347143498\",\"5\":\"2.647037e-05\"},{\"1\":\"frame_material_aluminium\",\"2\":\"-1.155327e+03\",\"3\":\"323.1113\",\"4\":\"-3.575631143\",\"5\":\"4.811605e-04\"},{\"1\":\"frame_material_carbon\",\"2\":\"NA\",\"3\":\"NA\",\"4\":\"NA\",\"5\":\"NA\"},{\"1\":\"category_1_E.Bikes\",\"2\":\"9.334568e+03\",\"3\":\"2130.6848\",\"4\":\"4.381017514\",\"5\":\"2.310008e-05\"},{\"1\":\"category_1_Gravel\",\"2\":\"1.186818e+01\",\"3\":\"1883.8851\",\"4\":\"0.006299841\",\"5\":\"9.949825e-01\"},{\"1\":\"category_1_Hybrid...City\",\"2\":\"4.573161e+02\",\"3\":\"847.2392\",\"4\":\"0.539772115\",\"5\":\"5.902179e-01\"},{\"1\":\"category_1_Mountain\",\"2\":\"2.039902e+03\",\"3\":\"895.8554\",\"4\":\"2.277043757\",\"5\":\"2.431052e-02\"},{\"1\":\"category_1_Road\",\"2\":\"NA\",\"3\":\"NA\",\"4\":\"NA\",\"5\":\"NA\"},{\"1\":\"category_2_Adventure\",\"2\":\"1.125163e+03\",\"3\":\"1271.3457\",\"4\":\"0.885017091\",\"5\":\"3.776758e-01\"},{\"1\":\"category_2_All.Road\",\"2\":\"NA\",\"3\":\"NA\",\"4\":\"NA\",\"5\":\"NA\"},{\"1\":\"category_2_City\",\"2\":\"-2.163999e+03\",\"3\":\"805.8271\",\"4\":\"-2.685437913\",\"5\":\"8.125548e-03\"},{\"1\":\"category_2_Cross.Country\",\"2\":\"-9.022734e+02\",\"3\":\"636.1789\",\"4\":\"-1.418269838\",\"5\":\"1.583501e-01\"},{\"1\":\"category_2_Cyclocross\",\"2\":\"-1.728645e+03\",\"3\":\"743.5450\",\"4\":\"-2.324869946\",\"5\":\"2.152718e-02\"},{\"1\":\"category_2_Dirt.Jump\",\"2\":\"-2.187418e+03\",\"3\":\"1033.4342\",\"4\":\"-2.116649129\",\"5\":\"3.607142e-02\"},{\"1\":\"category_2_Downhill\",\"2\":\"2.866325e+03\",\"3\":\"867.9983\",\"4\":\"3.302223810\",\"5\":\"1.219466e-03\"},{\"1\":\"category_2_E.City\",\"2\":\"-1.183165e+03\",\"3\":\"1075.5447\",\"4\":\"-1.100061232\",\"5\":\"2.732070e-01\"},{\"1\":\"category_2_E.Fitness\",\"2\":\"-5.463368e+03\",\"3\":\"1481.8770\",\"4\":\"-3.686789335\",\"5\":\"3.247410e-04\"},{\"1\":\"category_2_E.Gravel\",\"2\":\"-4.414298e+03\",\"3\":\"1382.0843\",\"4\":\"-3.193942598\",\"5\":\"1.736452e-03\"},{\"1\":\"category_2_E.Mountain\",\"2\":\"-1.410815e+03\",\"3\":\"1062.4686\",\"4\":\"-1.327865566\",\"5\":\"1.863990e-01\"},{\"1\":\"category_2_E.Road\",\"2\":\"-5.637443e+03\",\"3\":\"1779.8780\",\"4\":\"-3.167319956\",\"5\":\"1.891607e-03\"},{\"1\":\"category_2_E.Trekking\",\"2\":\"NA\",\"3\":\"NA\",\"4\":\"NA\",\"5\":\"NA\"},{\"1\":\"category_2_Endurance\",\"2\":\"-7.442989e+02\",\"3\":\"506.1457\",\"4\":\"-1.470523100\",\"5\":\"1.436802e-01\"},{\"1\":\"category_2_Enduro\",\"2\":\"1.645766e+03\",\"3\":\"777.5685\",\"4\":\"2.116554429\",\"5\":\"3.607960e-02\"},{\"1\":\"category_2_Fat.Bikes\",\"2\":\"-8.518723e+02\",\"3\":\"1273.4772\",\"4\":\"-0.668934052\",\"5\":\"5.046470e-01\"},{\"1\":\"category_2_Race\",\"2\":\"-2.367996e+02\",\"3\":\"489.1786\",\"4\":\"-0.484075896\",\"5\":\"6.290938e-01\"},{\"1\":\"category_2_Touring\",\"2\":\"NA\",\"3\":\"NA\",\"4\":\"NA\",\"5\":\"NA\"},{\"1\":\"category_2_Trail\",\"2\":\"NA\",\"3\":\"NA\",\"4\":\"NA\",\"5\":\"NA\"},{\"1\":\"category_2_Triathlon.Bike\",\"2\":\"NA\",\"3\":\"NA\",\"4\":\"NA\",\"5\":\"NA\"},{\"1\":\"category_3_Aeroad\",\"2\":\"6.806063e+02\",\"3\":\"510.9261\",\"4\":\"1.332103393\",\"5\":\"1.850062e-01\"},{\"1\":\"category_3_Commuter\",\"2\":\"1.658551e+03\",\"3\":\"694.5196\",\"4\":\"2.388055131\",\"5\":\"1.828197e-02\"},{\"1\":\"category_3_Commuter.ON\",\"2\":\"-3.038192e+03\",\"3\":\"1469.8517\",\"4\":\"-2.067005873\",\"5\":\"4.058897e-02\"},{\"1\":\"category_3_Dude\",\"2\":\"NA\",\"3\":\"NA\",\"4\":\"NA\",\"5\":\"NA\"},{\"1\":\"category_3_Endurace\",\"2\":\"NA\",\"3\":\"NA\",\"4\":\"NA\",\"5\":\"NA\"},{\"1\":\"category_3_Endurace.ON\",\"2\":\"NA\",\"3\":\"NA\",\"4\":\"NA\",\"5\":\"NA\"},{\"1\":\"category_3_Exceed\",\"2\":\"-1.357841e+03\",\"3\":\"558.5900\",\"4\":\"-2.430837071\",\"5\":\"1.633811e-02\"},{\"1\":\"category_3_Grail\",\"2\":\"-1.453319e+03\",\"3\":\"1789.7960\",\"4\":\"-0.812002578\",\"5\":\"4.181786e-01\"},{\"1\":\"category_3_Grail.ON\",\"2\":\"NA\",\"3\":\"NA\",\"4\":\"NA\",\"5\":\"NA\"},{\"1\":\"category_3_Grand.Canyon\",\"2\":\"-1.529561e+03\",\"3\":\"643.8847\",\"4\":\"-2.375519302\",\"5\":\"1.888907e-02\"},{\"1\":\"category_3_Grand.Canyon.ON\",\"2\":\"-4.399990e+02\",\"3\":\"1246.4452\",\"4\":\"-0.353003097\",\"5\":\"7.246209e-01\"},{\"1\":\"category_3_Inflite\",\"2\":\"NA\",\"3\":\"NA\",\"4\":\"NA\",\"5\":\"NA\"},{\"1\":\"category_3_Lux\",\"2\":\"NA\",\"3\":\"NA\",\"4\":\"NA\",\"5\":\"NA\"},{\"1\":\"category_3_Neuron\",\"2\":\"-1.203612e+02\",\"3\":\"520.4488\",\"4\":\"-0.231264293\",\"5\":\"8.174496e-01\"},{\"1\":\"category_3_Neuron.ON\",\"2\":\"1.661154e+03\",\"3\":\"1128.6925\",\"4\":\"1.471750737\",\"5\":\"1.433487e-01\"},{\"1\":\"category_3_Pathlite\",\"2\":\"NA\",\"3\":\"NA\",\"4\":\"NA\",\"5\":\"NA\"},{\"1\":\"category_3_Pathlite.ON\",\"2\":\"NA\",\"3\":\"NA\",\"4\":\"NA\",\"5\":\"NA\"},{\"1\":\"category_3_Precede.ON\",\"2\":\"NA\",\"3\":\"NA\",\"4\":\"NA\",\"5\":\"NA\"},{\"1\":\"category_3_Roadlite\",\"2\":\"NA\",\"3\":\"NA\",\"4\":\"NA\",\"5\":\"NA\"},{\"1\":\"category_3_Roadlite.ON\",\"2\":\"NA\",\"3\":\"NA\",\"4\":\"NA\",\"5\":\"NA\"},{\"1\":\"category_3_Sender\",\"2\":\"NA\",\"3\":\"NA\",\"4\":\"NA\",\"5\":\"NA\"},{\"1\":\"category_3_Spectral\",\"2\":\"NA\",\"3\":\"NA\",\"4\":\"NA\",\"5\":\"NA\"},{\"1\":\"category_3_Spectral.ON\",\"2\":\"NA\",\"3\":\"NA\",\"4\":\"NA\",\"5\":\"NA\"},{\"1\":\"category_3_Speedmax\",\"2\":\"NA\",\"3\":\"NA\",\"4\":\"NA\",\"5\":\"NA\"},{\"1\":\"category_3_Stitched\",\"2\":\"NA\",\"3\":\"NA\",\"4\":\"NA\",\"5\":\"NA\"},{\"1\":\"category_3_Strive\",\"2\":\"-5.686201e+00\",\"3\":\"851.4963\",\"4\":\"-0.006677893\",\"5\":\"9.946814e-01\"},{\"1\":\"category_3_Torque\",\"2\":\"NA\",\"3\":\"NA\",\"4\":\"NA\",\"5\":\"NA\"},{\"1\":\"category_3_Ultimate\",\"2\":\"NA\",\"3\":\"NA\",\"4\":\"NA\",\"5\":\"NA\"},{\"1\":\"gender_female\",\"2\":\"-7.384638e+02\",\"3\":\"240.4957\",\"4\":\"-3.070590669\",\"5\":\"2.570194e-03\"},{\"1\":\"gender_unisex\",\"2\":\"NA\",\"3\":\"NA\",\"4\":\"NA\",\"5\":\"NA\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n\n# IV. Evaluate your model with the yardstick package\nNow that the model is trained, you can use it to predict on the test set, and evaluate its performance\n\n::: {.cell hash='03_regression_2_cache/html/unnamed-chunk-7_f3a884986239ad54d5e8b8c0e5b938d3'}\n\n```{.r .cell-code}\n# Get predictions\nbikes_pred <- predict(bikes_fit, test_data)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> Warning in predict.lm(object = object$fit, newdata = new_data, type =\n#> \"response\"): prediction from a rank-deficient fit may be misleading\n```\n:::\n\n```{.r .cell-code}\nbikes_pred\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\".pred\"],\"name\":[1],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"5987.4786\"},{\"1\":\"5434.5724\"},{\"1\":\"5434.5724\"},{\"1\":\"1374.9284\"},{\"1\":\"2558.3552\"},{\"1\":\"3778.0847\"},{\"1\":\"3168.4259\"},{\"1\":\"3608.2962\"},{\"1\":\"3860.0515\"},{\"1\":\"4152.7903\"},{\"1\":\"3692.0761\"},{\"1\":\"3428.6112\"},{\"1\":\"3346.6443\"},{\"1\":\"3203.5724\"},{\"1\":\"4288.1926\"},{\"1\":\"4288.1926\"},{\"1\":\"3725.3720\"},{\"1\":\"4288.1926\"},{\"1\":\"4171.0970\"},{\"1\":\"4929.6093\"},{\"1\":\"4994.0119\"},{\"1\":\"3851.5686\"},{\"1\":\"4929.6093\"},{\"1\":\"2373.1910\"},{\"1\":\"4579.9024\"},{\"1\":\"2600.9883\"},{\"1\":\"3592.8556\"},{\"1\":\"1811.0676\"},{\"1\":\"5604.4776\"},{\"1\":\"4163.4407\"},{\"1\":\"1172.1350\"},{\"1\":\"1142.8611\"},{\"1\":\"612.2283\"},{\"1\":\"670.7761\"},{\"1\":\"1397.5303\"},{\"1\":\"2777.0740\"},{\"1\":\"4430.5092\"},{\"1\":\"1328.0068\"},{\"1\":\"1480.9930\"},{\"1\":\"3994.1559\"},{\"1\":\"4228.7872\"},{\"1\":\"3013.5293\"},{\"1\":\"4688.5579\"},{\"1\":\"4395.8191\"},{\"1\":\"614.1657\"},{\"1\":\"4548.8167\"},{\"1\":\"4402.4473\"},{\"1\":\"4003.9848\"},{\"1\":\"5061.1419\"},{\"1\":\"5352.0190\"},{\"1\":\"5814.5463\"},{\"1\":\"977.0150\"},{\"1\":\"1548.6602\"},{\"1\":\"1121.2616\"},{\"1\":\"1039.2947\"},{\"1\":\"1730.9203\"},{\"1\":\"1335.0639\"},{\"1\":\"2698.6055\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n\n```{.r .cell-code}\n# Get metrics\nbikes_pred %>%\n  bind_cols(test_data %>% select(price)) %>%\n  yardstick::metrics(truth = price, estimate = .pred)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\".metric\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\".estimator\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\".estimate\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"rmse\",\"2\":\"standard\",\"3\":\"1284.3457204\"},{\"1\":\"rsq\",\"2\":\"standard\",\"3\":\"0.4832843\"},{\"1\":\"mae\",\"2\":\"standard\",\"3\":\"968.0239394\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}